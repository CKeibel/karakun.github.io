{% assign size = mediaList | size %}
{% for media in mediaList %}
  {% assign loopindex = forloop.index | modulo: 2 %}
  {% if loopindex == 1 %}
    <div class="columns">
  {% endif %}
    {% if forloop.index == size and loopindex == 1 %}
      <article class="karakun-media column content">
    {% else %}
      <article class="karakun-media column content is-half">
    {% endif %}
      {%- if linkToDetails -%}
        <a href="{{ media.url }}"><h3 class="has-text-primary">{{ media.title }}</h3></a>
      {% else %}
        <h3 class="has-text-primary">{{ media.title }}</h3>
      {% endif %}
      {%- if media.subtitle -%}
        <h5>{{ media.subtitle }}</h5>
      {% endif %}
        <p class="description">
          {%- if media.featuredImage -%}
            <img class="featured-image" src="/assets/featuredImages/{{ media.featuredImage }}.png">
          {% endif %}
          {%- if linkToDetails -%}
            <a class="excerpt" href="{{ media.url}}">{{ media.description }}</a>
          {% else %}
            {{ media.description }}
          {% endif %}
        </p>
      {%- if showAuthor -%}
        {% assign author = site.people | where:'name', media.author | first %}
        <p class="metadata"><a href="{{ author.url }}"><i class="fas fa-author"></i> {{ author.firstName }} {{ author.lastName }}</a></p>
      {% endif %}
      {% for metadata in media.metadata %}
        {%- if metadata.link -%}
          <p class="metadata"><i class="fas {{ metadata.icon }}"></i> <a href="{{ metadata.link }}">{{ metadata.description }}</a></p>
        {% else %}
          <p class="metadata"><i class="fas {{ metadata.icon }}"></i> {{ metadata.description }}</p>
        {% endif %}
      {% endfor %}
    </article>
  {% if loopindex == 0 or forloop.index == size %}
    </div>
  {% endif %}
{% endfor %}
